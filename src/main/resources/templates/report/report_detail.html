<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>Report View</title>
    <link rel="stylesheet" href="/bootstrap.css">
    <link rel="stylesheet" href="/bootstrap-grid.css">
    <link rel="stylesheet" href="/bootstrap-reboot.css">
    <link rel="stylesheet" type="text/css" href="/board.css">

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="/">Main</a>
            <a class="navbar-brand" href="/report">Report</a>
        </div>
    </nav>
    <div class="container">
        <div class="t-c">
            <h4><span th:text="${authority.username}">username</span>, Welcome!</h4>
<!--            <span th:text="${authority.realName}">realname</span>-->
<!--            <span th:text="${authority.role}">role</span>-->
        </div>
        <hr/>
        Report Id : <span th:text="${info.reportId}"></span>
        <p>
            <h5 th:text="${info.simpleDate + '_' + info.reportType}"></h5>
            by <span th:text="${info.username}"></span>
            <span class="text-grey" th:text="${'['+info.writeDate+']'}"></span>
            <div th:unless="${info.writeDate} == ${info.updatedTime}">
                last updated <span class="text-grey" th:text="${'['+info.updatedTime+']'}"></span>
            </div>
            <div>State : <span th:text="${info.state}"></span></div>
        </p>
        <div style="padding-left: 20px">
            <div th:if="${info.reportType} == 'Daily'">
                <p><strong>한 일(Done)</strong></p>
                <div th:each="view:${list}">
                    <li th:text="${view.done}"></li>
                </div>
            </div>
            <div th:if="${info.reportType} == 'Weekly'">
                <p><strong>이번 주 계획(This Week Plan)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Progress</th>
                            <th>Expected Achievement</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="view:${list}" th:if="${view.reportKind} == 'weekly_plan'">
                            <td th:text="${view.progress}" class="col-sm-4"></td>
                            <td th:text="${view.achievement} + '%'" class="col-sm-3"></td>
                            <td th:text="${view.comment}" class="col-sm-5"></td>
                        </tr>
                    </tbody>
                </table>
                <p><strong>이번주 결과(This Week Result)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Done</th>
                            <th>Achievement</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="view, i:${list}" th:if="${view.reportKind} == 'weekly_result'">
                            <td th:text="${view.done} + ${i.size}" class="col-sm-4"></td>
                            <td th:text="${view.achievement} + '%'" class="col-sm-3"></td>
                            <td th:text="${view.comment}" class="col-sm-5"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${info.reportType} == 'Monthly'">
                <p><strong>이번 달 성과(This Month Result)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Done</th>
                            <th>Achievement</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="view:${list}" th:if="${view.reportKind} == 'Done'">
                            <td th:text="${view.done}" class="col-sm-4"></td>
                            <td th:text="${view.achievement} + '%'" class="col-sm-3"></td>
                            <td th:text="${view.comment}" class="col-sm-5"></td>
                        </tr>
                    </tbody>
                </table><br/>
                <p><strong>다음 달 계획(Next Month Plan)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Progress</th>
                        <th>Expected Achievement</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="view:${list}" th:if="${view.reportKind} == 'Next_Month_plan'">
                        <td th:text="${view.progress}" class="col-sm-4"></td>
                        <td th:text="${view.achievement} + '%'" class="col-sm-3"></td>
                        <td th:text="${view.comment}" class="col-sm-5"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${info.reportType} == 'Yearly'">
                <p><strong>프로젝트 설명(Project Description)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Project Name</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="view:${list}" th:if="${view.reportKind}=='project_description'">
                            <td th:text="${view.progress}" class="col-sm-6"></td>
                            <td th:text="${view.comment}" class="col-sm-6"></td>
                        </tr>
                    </tbody>
                </table><br/>
                <p><strong>마일스톤(Milestones)</strong></p>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <td>Milestone</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="view:${list}" th:if="${view.reportKind}=='milestone'">
                            <td th:text="${view.progress}" class="col-sm-6"></td>
                            <td th:text="${view.comment}" class="col-sm-6"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${info.reportType} == 'Notice'">
                <p><strong>공지(Notice)</strong></p>
                <div th:each="view:${list}">
                    <li th:text="${view.progress}"></li>
                </div>
            </div>
        </div>
        <br/><hr/>
        <div th:if="${authority.username} == ${info.username} and ${info.state} == 'Waiting' or ${info.state} == 'Rejected'">
            <a>Modify</a>
            <a>Delete</a>
        </div>
        <div th:if="${authority.username} == ${info.username} and ${info.state}=='Waiting'">
            <form action="/report/request_state" method="get">
                <input type="hidden" name="rId" th:value="${info.reportId}"/>
                <input type="hidden" name="username" th:value="${info.username}"/>
                <input type="submit" value="Request"/>
            </form>
        </div>
<!--        <div th:if="${authority.role} == 'ADMIN' and ${info.state} == 'Requested'">-->
<!--            <form method="post" action="/change_state">-->
<!--                <input type="hidden" th:value="${info.reportId}" name="report_id"/>-->
<!--                <input type="submit" name="Approve" value="Approve">-->
<!--                <input type="submit" name="Reject" value="Reject">-->
<!--            </form>-->
<!--        </div>-->
        <div th:if="${authority.role} == 'ADMIN' and ${info.state} == 'Requested'">
            <span>Approve</span>
            <span>Reject</span>
        </div>
        <a href="/report">Back to List</a>
    </div>
</body>
</html>